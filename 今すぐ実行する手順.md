# 今すぐ実行する手順（PostgreSQLパスワードリセット）

## 最も簡単な方法

### ステップ1: 管理者権限でPowerShellを開く

1. **Windowsキー**を押す
2. 「**PowerShell**」と入力
3. 「**Windows PowerShell**」を**右クリック**
4. 「**管理者として実行**」を選択

### ステップ2: 以下のコマンドを1つずつ実行

```powershell
# PostgreSQLサービスを停止
Stop-Service -Name "postgresql-x64-18" -Force

# pg_hba.confのバックアップを作成
Copy-Item "C:\Program Files\PostgreSQL\18\data\pg_hba.conf" "C:\Program Files\PostgreSQL\18\data\pg_hba.conf.backup"

# pg_hba.confを編集（scram-sha-256をtrustに変更）
$content = Get-Content "C:\Program Files\PostgreSQL\18\data\pg_hba.conf" -Raw
$content = $content -replace 'scram-sha-256', 'trust'
$content | Set-Content "C:\Program Files\PostgreSQL\18\data\pg_hba.conf" -NoNewline

# PostgreSQLサービスを起動
Start-Service -Name "postgresql-x64-18"

# 少し待つ
Start-Sleep -Seconds 3

# パスワードをpostgresに設定
$psqlPath = "C:\Program Files\PostgreSQL\18\bin\psql.exe"
& $psqlPath -U postgres -c "ALTER USER postgres WITH PASSWORD 'postgres';"

# pg_hba.confを元に戻す
Copy-Item "C:\Program Files\PostgreSQL\18\data\pg_hba.conf.backup" "C:\Program Files\PostgreSQL\18\data\pg_hba.conf" -Force
Remove-Item "C:\Program Files\PostgreSQL\18\data\pg_hba.conf.backup" -Force

# PostgreSQLサービスを再起動
Restart-Service -Name "postgresql-x64-18"

# 少し待つ
Start-Sleep -Seconds 3

# データベースを作成
$env:PGPASSWORD = "postgres"
& $psqlPath -U postgres -c "CREATE DATABASE pic_cul;"

Write-Host "完了しました！"
```

### ステップ3: 通常のPowerShellでマイグレーション実行

管理者権限のPowerShellを閉じて、通常のPowerShellで：

```powershell
cd C:\Users\ngf005148\Desktop\webapps\Pic_cul\backend
npm run db:migrate
npm run db:seed
cd ..
npm run dev
```

## 注意事項

- **必ず管理者権限でPowerShellを開いてください**
- コマンドは1つずつ実行してください
- エラーが出た場合は、エラーメッセージを確認してください

## 完了後の確認

以下のURLにアクセスして、ログイン画面が表示されれば成功です：
- http://localhost:3000/admin/login
- 店舗ID: `sample-store-001`
- パスワード: `password123`

